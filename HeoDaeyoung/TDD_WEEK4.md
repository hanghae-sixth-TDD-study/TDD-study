# TDD 4주차 - chapter7, chapter8

## Chapter 7. 대역

### 대역의 필요성

1. 테스트 대상에서 파일 시스템을 사용
2. 테스트 대상에서 DB 부터 데이터 조회
3. 외부의 HTTP 서버의 통신

다음과 같은 상황일 때, 해당 기능을 이용 하지 못하거나 속도적인 측면을 위해
해당 기능을 흉내내는 대역을 만들어 사용한다.

### 대역의 종류
1. 스텁(Stub): 단순한 것으로 대체. 원하는 동작 수행
2. 가짜(Fake): 제품에는 적합하지 않지만, 구현제공. DB 대신 메모리 이용 등
3. 스파이(Spy): 호출 내용을 기록. 검증 할 때 사용 가능. Stub 이기 도함
4. 모의(Mock) 기대한 대로 상호작용 하는지 검증. 익셉션 발생가능. Stub 이자 Spy 가능

### 대역을 사용시 개발 속도가 현저히 증가한다.

모두 API, DB, 이메일링 등 모두 실행이 될 때가지 기다림이 존재

### 모의 객체 과하게 사용 자제

하나의 테스트의 여러 모의 객체가 사용 될 경우, 이 모의 객체 모두를 검증 해야 되기 떄문에 오히려
테스트 코드로 인해 구현되어야 하는 코드가 많아짐.

BDDMockito 를 사용하면 조금 더 given, when, then 의 규격의 맞춰서 테스트가 가능하다.

BDDMockito 관련 추가 아티클
Wonit님 블로그: https://wonit.tistory.com/493

## Chapter 8. 테스트 가능한 설계

### 테스트가 어려운 코드
- 하드 코딩된 경로 
- 의존 객체를 직접 생성 
- 정적 메서드 사용 
- 실행 시점에 따라 달라지는 결과 
- 역할이 섞여 있는 코드 
- 그 외: 소켓통신 코드 포함, 콘솔입력포함, final 의존대상, 테스트 대상의 소스 소유 X 등

### 테스트 가능한 설계
- 하드 코딩된 상수를 생성자나 메서드 파라미터로 받기 
- 의존 대상을 주입받기 
- 테스트하고 싶은 코드를 분리하기 
- 시간이나 임의 값 생성 기능 분리하기 
- 외부 라이브러리는 직접 사용하지 말고 감싸서 사용하기

